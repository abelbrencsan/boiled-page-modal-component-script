# Boiled Page modal component and script

Modal SCSS component and script for Boiled Page frontend framework. They are intended to create pop up windows for images, dialogs, HTML, YouTube and Vimeo videos, Ajax driven content.

## Install

Place `_modal.scss` file to `/assets/css/components` directory, and add its path to component block in `assets/css/app.scss` file. 

You will also need to place `modal.js` to `/assets/js` directory and add its path to `scripts` variable in `gulpfile.js` to be combined with other scripts.

## Usage

### Modal component

#### Classes

HTML elements with the following classes are generated by JavaScript when modal opens.

Class name | Description | Example
---------- | ----------- | -------
`modal` | Applies modal. | `<div class="modal"></div>`
`modal-backdrop` | Applies backdrop inside modal. | `<div class="modal-backdrop"></div>`
`modal-close` | Applies close button inside modal. | `<button class="modal-close"></button>`
`modal-spinner` | Applies spinner inside modal. | `<div class="modal-spinner"></div>`
`modal-item` | Applies modal item inside modal. | `<div class="modal-item"></div>`
`modal-item--dialog` | Applies a dialog modal item inside modal. | `<div class="modal-item modal-item--dialog"></div>`
`modal-item--ajax` | Modifies a dialog modal item to fit Ajax fetched contents inside modal. | `<div class="modal-item modal-item--dialog modal-item--ajax"></div>`
`modal-item--image` | Applies an image modal item inside modal. | `<img class="modal-item modal-item--image" />`
`modal-item--video` | Applies an HTML video modal item inside modal. | `<video class="modal-item modal-item--video"></video>`
`modal-item--youtube` | Applies a YouTube video modal item as an iframe inside modal. | `<iframe class="modal-item modal-item--youtube"></iframe>`
`modal-item--vimeo` | Applies a Vimeo video modal item as an iframe inside modal. | `<iframe class="modal-item modal-item--vimeo"></iframe>`

#### Examples

##### Example 1

The following example shows a link that opens an image in a modal. `data-modal-type` attribute is used for modal script.

```html
<a href="https://picsum.photos/600/400" data-modal-type="image">Image</a>
```

##### Example 2

The following example shows a link that opens a dialog in a modal. `data-modal-type` attribute is used for modal script.

```html
<a href="#modal-dialog" data-modal-type="dialog">Dialog</a>
```

Place the following HTML to set create dialog content. If `aria-labelledby` attribute is used, only the content of `aria-labelledby` and `aria-describedby` attributes will be read by screen readers. If you want to place longer content, skip `aria-labelledby`, in this case modal switches to document role. `data-modal` attributes are used for modal script.

```html
<div id="modal-dialog" hidden aria-labelledby="modal-dialog-title" aria-describedby="modal-dialog-description">
  <h2 id="modal-dialog-title">Heading 2 with a Subtitle</h2>
  <p id="modal-dialog-description">Lorem ipsum dolor sit amet nullam id egestas urna aliquam</p>
  <ul class="grid grid--gutter grid--gutter--half">
    <li class="grid-col">
      <button type="button" data-modal-accept-trigger>Accept</button>
    </li>
    <li class="grid-col">
      <button type="button" data-modal-close-trigger>Close</button>
    </li>
  </ul>
</div>
```

##### Example 3

The following example shows a link that opens an HTML video in a modal. `data-modal-type` attribute is used for modal script.

```html
<a href="https://test-videos.co.uk/vids/bigbuckbunny/mp4/h264/360/Big_Buck_Bunny_360_10s_1MB.mp4" data-modal-type="video">Video</a>
```

##### Example 4

The following example shows a link that opens a YouTube video as an iframe in a modal. `data-modal-type` attribute is used for modal script.

```html
<a href="https://www.youtube.com/watch?v=YE7VzlLtp-4" data-modal-type="youtube">YouTube</a>
```

##### Example 5

The following example shows a link that opens a Vimeo video as an iframe in a modal. `data-modal-type` attribute is used for modal script.

```html
<a href="https://vimeo.com/1084537" data-modal-type="vimeo">Vimeo</a>
```

##### Example 6

The following example shows a link that opens a dialog with the content of given link in a modal. `data-modal-type` attribute is used for modal script.

```html
<a href="index.html" data-modal-type="ajax">Ajax</a>
```

#### Extension ideas

##### Narow modal

```scss
/* Modal component extensions */
div.modal {

  // Narrow modal
  &.modal--narrow {

    > div.modal-item.modal-item--dialog  {
      max-width: ($container-width / 1.5) - $grid-gutter;
    }
  }
}
```

##### Half-size modal

```scss
/* Modal component extensions */
div.modal {

  // Half-size modal
  &.modal--half {

    > div.modal-item.modal-item--dialog {
      max-width: ($container-width / 2 );
    }
  }
}
```

### Modal script

#### Usage

To create a new modal instance, call `Modal` constructor the following way:

```js
// Create new modal instance
var modal = new Modal(options);

// Initialize modal instance
modal.initTrigger();
```

#### Options

Available options for accordion constructor:

Option| Type | Default | Required | Description
------|------|---------|----------|------------
`type` | String | null | Yes | Type of modal item. Available options are `dialog`, `image`, `video`, `youtube`, `vimeo`, `ajax`.
`source` | String | null | Yes | Source of modal item. An URL is required when type of modal item is `image`, `video`, `youtube`, `vimeo`, `ajax`, a selector is required when type of modal item is `dialog`.
`trigger` | Object | null | No | Trigger opens modal on click.
`closeOnBackdropClick` | Boolean | true | No | Close modal on modal backdrop click.
`closeOnEsc` | Boolean | true | No | Close modal when `Esc` key is pressed.
`closeButton` | Boolean | true | No | Create close button for modal automatically.
`customClasses` | Array | [] | No | Additional classes added to modal.
`customItemClasses` | Array | [] | No | Additional classes added to modal item.
`customCloseTriggerSelector` | String | null | No | Attach close event to all elements inside modal item those match the given selector.
`customAcceptTriggerSelector` | String | null | No | Attach accept event to all elements inside modal item those match the given selector.
`initTriggerCallback` | Function | null | No | Callback function after modal trigger is initialized.
`removeTriggerCallback` | Function | null | No | Callback function after modal trigger is removed.
`openCallback` | Function | null | No | Callback function after modal is opened.
`closeCallback` | Function | null | No | Callback function after modal is closed.
`acceptCallback` | Function | null | No | Callback function after modal is set as accepted.
`removeCallback` | Function | null | No | Callback function after modal is removed.
`loadCallback` | Function | null | No | Callback function after modal item content is loaded.
`itemLabel` | String | null | No | Short description for modal item when it contains only visual content. It is added to modal as an `aria-label` attribute.
`openAnimationName` | String | null | No | Name of the CSS animation to detect modal is already opened. Keep it empty if you do not want to use animations.
`closeAnimationName` | String | null | No | Name of the CSS animation to detect modal is already closed. Keep it empty if you do not want to use animations.to use animations.
`closeButtonLabel` | String | 'Close modal' | No | Label added to close button for screen readers.
`isClosedClass` | String | 'is-closed' | No | Class added to modal after it is closed.
`isClosingClass` | String | 'is-closing' | No | Class added to modal when it is closing.
`isLoadedClass` | String | 'is-loaded' | No | Class added to modal when modal item content is loaded.
`isModalOpenedClass` | String | 'is-modal-opened' | No | Class added to body after modal is opened.
`isOpenedClass` | String | 'is-opened' | No | Class added to modal after it is opened.
`isOpeningClass` | String | 'is-opening' | No | Class added to modal when it is opening.
`modalClass` | String | 'modal' | No | Class added to modal.
`modalBackdropClass` | String | 'modal-backdrop' | No | Class added to modal backdrop.
`modalCloseClass` | String | 'modal-close' | No | Class added to modal close button.
`modalItemClass` | String | 'modal-item' | No | Class added to modal item.
`modalItemDialogClass` | String | 'modal-item--dialog' | No | Additional class added to modal item when its type is `dialog`.
`modalItemAjaxClass` | String | 'modal-item--ajax' | No | Additional class added to modal item when its type is `ajax`.
`modalItemImageClass` | String | 'modal-item--image' | No | Additional class added to modal item when its type is `image`.
`modalItemVideoClass` | String | 'modal-item--video' | No | Additional class added to modal item when its type is `video`.
`modalItemVimeoClass` | String | 'modal-item--vimeo' | No | Additional class added to modal item when its type is `vimeo`.
`modalItemYouTubeClass` | String | 'modal-item--youtube' | No | Additional class added to modal item when its type is `youtube`.
`modalSpinnerClass` | String | 'modal-spinner' | No | Class added to modal spinner.

#### Methods

##### Initialize modal trigger

`initTrigger()` - Initialize modal trigger.

##### Remove modal trigger

`removeTrigger()` - Remove related events from modal trigger.

##### Open modal

`open()` - Create modal to the DOM, load and append modal item based on its type.

##### Close modal

`close()` - Close opened modal, call `remove()` method after closing animation is finished (or animation is not enabled).

##### Accept modal

`accept()` - Set modal as accepted. It is useful for making confirmation dialogs.

##### Remove modal

`remove()` - Remove modal from the DOM, set focus back to the element which was active before modal was opened.

##### Check modal trigger is initialized or not

`getIsTriggerInitialized()` - Check modal trigger is initialized or not. It returns `true` when it is already initialized, `false` if not.

##### Check modal is opened or not

`getIsModalOpened()` - Check modal is opened or not. It returns `true` when it is already opened, `false` if not.

#### Initialize modals with HTML attributes

Add `modals` property to `app` object in `assets/js/app.js`.

```js
modals: []
```

Place the following code inside `assets/js/app.js` to initialize elements with `data-modal-type` attribute as modal triggers.

```js
var modalElems = document.querySelectorAll('[data-modal-type]');
for (var i = 0; i < modalElems.length; i++) {
  app.modals[i] = new Modal({
    type: modalElems[i].getAttribute('data-modal-type'),
    source: modalElems[i].getAttribute('data-modal-source') || modalElems[i].getAttribute('href'),
    customCloseTriggerSelector: "[data-modal-close-trigger]",
    customAcceptTriggerSelector: "[data-modal-accept-trigger]",
    openAnimationName: 'modal-item-close',
    closeAnimationName: 'modal-wrapper-close',
    trigger: modalElems[i]
  });
  app.modals[i].initTrigger();
}
```
